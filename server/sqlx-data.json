{
  "db": "PostgreSQL",
  "023f12d139293049e29dd35c2f4a29a3d645822349139d47da6677bd8df6b7c0": {
    "query": "\n            select\n                (select spotify_id from spot.plays\n                    where user_id = $1 and played_at <= $2\n                    order by played_at desc limit 1) as before,\n                (select spotify_id from spot.plays\n                    where user_id = $1 and played_at >= $2\n                    order by played_at asc limit 1) as after;\n            ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "before",
          "type_info": "Text"
        },
        {
          "ordinal": 1,
          "name": "after",
          "type_info": "Text"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Timestamptz"
        ]
      },
      "nullable": [
        null,
        null
      ]
    }
  },
  "0dc023abcf9916dd3b9ac8c196b8026b4c2677a5f3ee043268d5a1f0fadfb99d": {
    "query": "\n                select u.*\n                from spot.users u\n                    inner join spot.auth_tokens at\n                    on u.id = at.user_id\n                where hash = $1 and expires > now()\n                ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "email",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "scopes",
          "type_info": "TextArray"
        },
        {
          "ordinal": 4,
          "name": "access_token",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "access_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "refresh_token",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "refresh_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 8,
          "name": "access_expires",
          "type_info": "Int8"
        },
        {
          "ordinal": 9,
          "name": "auth_token",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "modified",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "1ad83dbbba9b0e42dff46cd5c01aecdce6713718d5f116c0e8d298560a54f553": {
    "query": "delete from spot.auth_tokens where user_id = $1 and expires <= now()",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": []
    }
  },
  "20c47d3cc32e5166a055778d4f40a985f1100211afdd615897a58627095662e9": {
    "query": "select * from spot.plays where user_id = $1 order by played_at desc",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "spotify_id",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "played_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 4,
          "name": "played_at_minute",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 5,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "created",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 7,
          "name": "modified",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 8,
          "name": "artist_names",
          "type_info": "TextArray"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "21f9b6bb08cbc944d91697e04ed234345b2d548fb72814e777540b60ab038d0a": {
    "query": "\n        update spot.users set access_token = $1, access_nonce = $2, access_expires = $3, modified = now() where id = $4 returning *\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "email",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "scopes",
          "type_info": "TextArray"
        },
        {
          "ordinal": 4,
          "name": "access_token",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "access_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "refresh_token",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "refresh_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 8,
          "name": "access_expires",
          "type_info": "Int8"
        },
        {
          "ordinal": 9,
          "name": "auth_token",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "modified",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "Int8",
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "379b474cc9977f97dd8726afd9d0e9582362e6cbf8aa60e16613c23b72afd9af": {
    "query": "\n            select * from spot.plays where user_id = $1\n            order by played_at desc\n            limit 1\n            ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "user_id",
          "type_info": "Int8"
        },
        {
          "ordinal": 2,
          "name": "spotify_id",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "played_at",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 4,
          "name": "played_at_minute",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 5,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "created",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 7,
          "name": "modified",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 8,
          "name": "artist_names",
          "type_info": "TextArray"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "5710e37dc915a2b2601918208f4aa227020581cc1f0e0d578c770d12c8b844af": {
    "query": "select * from spot.users",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "email",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "scopes",
          "type_info": "TextArray"
        },
        {
          "ordinal": 4,
          "name": "access_token",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "access_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "refresh_token",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "refresh_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 8,
          "name": "access_expires",
          "type_info": "Int8"
        },
        {
          "ordinal": 9,
          "name": "auth_token",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "modified",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": []
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "66d153501ce8b3b5249e7a25bab8f7468c67ae855356d1fbeced65b4aa24414f": {
    "query": "\n                insert into spot.plays\n                (user_id, spotify_id, played_at, played_at_minute, name, artist_names)\n                values\n                ($1, $2, $3, $4, $5, $6)\n                on conflict (user_id, spotify_id, played_at_minute) do update set modified = now()\n                returning id, created, modified\n                ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "created",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 2,
          "name": "modified",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Text",
          "Timestamptz",
          "Timestamptz",
          "Text",
          "TextArray"
        ]
      },
      "nullable": [
        false,
        false,
        false
      ]
    }
  },
  "aef42b3be2cfd675dc9e421fdac3be5e0870cd28913072e309392d83308f9b4b": {
    "query": "\n        insert into \n        spot.users (\n            email, name, scopes,\n            access_token, access_nonce,\n            refresh_token, refresh_nonce,\n            access_expires,\n            auth_token\n        ) \n        values ($1, $2, $3, $4, $5, $6, $7, $8, $9) \n        on conflict (email) do update set name = excluded.name, scopes = excluded.scopes, \n        access_token = excluded.access_token, access_nonce = excluded.access_nonce, \n        refresh_token = excluded.refresh_token, refresh_nonce = excluded.refresh_nonce, \n        access_expires = excluded.access_expires, auth_token = excluded.auth_token, \n        modified = now()\n        returning *\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "id",
          "type_info": "Int8"
        },
        {
          "ordinal": 1,
          "name": "email",
          "type_info": "Text"
        },
        {
          "ordinal": 2,
          "name": "name",
          "type_info": "Text"
        },
        {
          "ordinal": 3,
          "name": "scopes",
          "type_info": "TextArray"
        },
        {
          "ordinal": 4,
          "name": "access_token",
          "type_info": "Text"
        },
        {
          "ordinal": 5,
          "name": "access_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 6,
          "name": "refresh_token",
          "type_info": "Text"
        },
        {
          "ordinal": 7,
          "name": "refresh_nonce",
          "type_info": "Text"
        },
        {
          "ordinal": 8,
          "name": "access_expires",
          "type_info": "Int8"
        },
        {
          "ordinal": 9,
          "name": "auth_token",
          "type_info": "Text"
        },
        {
          "ordinal": 10,
          "name": "created",
          "type_info": "Timestamptz"
        },
        {
          "ordinal": 11,
          "name": "modified",
          "type_info": "Timestamptz"
        }
      ],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "TextArray",
          "Text",
          "Text",
          "Text",
          "Text",
          "Int8",
          "Text"
        ]
      },
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ]
    }
  },
  "bf53ca8379507ca4b3d74a483f1985919cae6bdff0e4bb51f0a1310751162638": {
    "query": "\n        select played_at::date as date, count(*)\n        from spot.plays\n        where user_id = $1\n        group by played_at::date\n        order by played_at::date desc\n        ",
    "describe": {
      "columns": [
        {
          "ordinal": 0,
          "name": "date",
          "type_info": "Date"
        },
        {
          "ordinal": 1,
          "name": "count",
          "type_info": "Int8"
        }
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      },
      "nullable": [
        null,
        null
      ]
    }
  },
  "f85f1b9ad0ea81d7c02b867d0d373fa1d97c6628b5872904f31522ee99974f13": {
    "query": "\n        insert into\n        spot.auth_tokens (\n            hash, user_id, expires\n        )\n        values ($1, $2, $3)\n        ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Int8",
          "Timestamptz"
        ]
      },
      "nullable": []
    }
  },
  "fb5a11a471a196dd67c8564ecc90dd58a5ac4522b1ed5e88581fbdd638e00be8": {
    "query": "\n                insert into spot.tracks\n                (spotify_id, name, artist_names, artist_ids, album_name, album_id, album_images)\n                values\n                ($1, $2, $3, $4, $5, $6, $7)\n                on conflict (spotify_id) do update set\n                name = excluded.name, artist_names = excluded.artist_names,\n                artist_ids = excluded.artist_ids,\n                album_name = excluded.album_name, album_id = excluded.album_id,\n                album_images = excluded.album_images,\n                modified = now()\n                ",
    "describe": {
      "columns": [],
      "parameters": {
        "Left": [
          "Text",
          "Text",
          "TextArray",
          "TextArray",
          "Text",
          "Text",
          "Jsonb"
        ]
      },
      "nullable": []
    }
  }
}